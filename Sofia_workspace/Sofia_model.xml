<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Sofia_model" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="11.0.1_20180619">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1386, 788}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1158, 671]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.000000000000002">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-24.990656407035203, -15.773790829145696}">
    </property>
    <property name="CarDirector" class="ptolemy.carsim.CarDirector">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-435.0, -260.0]">
        </property>
    </property>
    <property name="isStormy" class="ptolemy.data.expr.Parameter" value="{false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false}">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-365.0, -265.0]">
        </property>
    </property>
    <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
        <property name="meanTime" class="ptolemy.data.expr.Parameter" value="4.0">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{0,1,2,2,1,1,1,2,0,0,0,2,1,0,1,2,0}">
        </property>
        <property name="fireAtStart" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="100">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-264.0, -71.25]">
        </property>
    </entity>
    <entity name="CarInput" class="ptolemy.carsim.CarInput">
        <property name="carInputId" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="connectedIntersections" class="ptolemy.data.expr.Parameter" value="{2}">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-59.0, -71.25]">
        </property>
    </entity>
    <entity name="CSVReader" class="ptolemy.actor.lib.io.CSVReader">
        <property name="fileOrURL" class="ptolemy.actor.parameters.FilePortParameter" value="C:/ptll11.0.1/ptolemy/carsim/cars.txt">
        </property>
        <property name="separator" class="ptolemy.data.expr.StringParameter" value="tab">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-165.0, -70.0]">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="{carId = int, carSpeed = int, fuel = int,  roadMap = arrayType(int, 2)}">
            </property>
        </port>
    </entity>
    <entity name="Intersection" class="ptolemy.carsim.Intersection">
        <property name="fileName" class="ptolemy.data.expr.FileParameter" value="intersection1.txt">
        </property>
        <property name="intersectionId" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="neighbors" class="ptolemy.data.expr.Parameter" value="{3,4,5}">
            <display name="neighbors{North,East,South"/>
        </property>
        <property name="stormy" class="ptolemy.data.expr.Parameter" value="isStormy(0)">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.EditorIcon">
            <property name="_trackShape" class="ptolemy.vergil.kernel.attributes.ResizablePolygonAttribute">
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.5853874728828, 0.6224038487881, 0.6262116931634, 1.0}">
                </property>
            </property>
            <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 1.0]">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="height" class="ptolemy.data.expr.Parameter" value="40">
                </property>
                <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={219, 75, 928, 617}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="4.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{12.5, 6.25}">
            </property>
        </property>
        <property name="carId" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[51.0, -71.25]">
        </property>
    </entity>
    <entity name="trackSelection" class="ptolemy.actor.lib.DiscreteClock">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="151.00">
        </property>
        <property name="period" class="ptolemy.actor.parameters.PortParameter" value="Infinity">
        </property>
        <property name="offsets" class="ptolemy.data.expr.Parameter" value="{0.0,0.3610044485,1.1894324648,1.2676577669,2.8371340683,6.0779263935,7.0024899353,7.6281032263,7.9461658087,8.6171359568,8.7412262294,20.0429883261,21.37170248,21.6999622133,21.7718204482,23.5418734029,24.7039242576,28.5759984058,30.6306432611,32.0342632298,33.2550163887,34.3462307771,35.3040163888,36.8150351812,38.0604519313,38.1625269756,38.6193993038,39.397623532,43.0942431563,43.988695346,45.344783034,45.4493787718,47.3157351801,47.4693809719,47.5920298459,47.8497583692,48.5440265547,50.5668672039,51.0267631869,52.2998357798,52.5241679929,53.1531304361,53.5126253117,54.1158853125,56.084484432,56.5579449289,57.1786548169,59.228920399,59.2901902217,60.0368174664,60.5165089767,60.9564975136,64.7230804385,64.831899403,67.7166525068,68.2912993164,68.3961899986,69.2433333794,71.5630209641,71.7161035951,76.1349272759,76.3783583655,76.7634580965,78.7163916505,80.4217673449,82.6316480384,82.7606280445,86.2586520438,88.5831210835,88.8810571754,90.1867795972,90.3853154779,92.6031733862,94.0127651109,94.265589199,96.3401029384,98.8138324778,100.0439168994,100.4800870315,100.5796963272,101.2295269052,101.9124084131,102.1514278751,103.3590343731,104.0930486062,104.7271645349,105.1913103162,105.266965933,106.5634605332,106.9739993167,108.5462236092,108.8647131186,110.3723115055,110.4323722268,112.7854811169,115.5054262546,119.4444017903,122.4427237782,124.0655734922,124.3714348006,124.8862706024,125.6356217322,126.6851515548,127.2918462247,127.8757277811,129.651532679,129.6787037552,130.3740155419,131.0728802482,131.6156181243,131.7523312825,133.7081982651,134.060662607,137.0093827247,137.5849477344,138.6952555466,138.8582045575,139.1763181479,140.5777721035,140.9179429193,141.7201011902,142.0926362609,142.3124043578,143.3401690402,143.4664089246,144.1165044921,144.2918213646,145.2294756957,145.324999721,145.7852085504,149.6238788047,150}&#10;">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{1,1,1,1,20,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,26,18,1,20,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,18,1,1,1,1,1,1,1,1,1,12,1,1,1,1,1,26,1,1,1,1,1,1,1,1,17,1,1,1,1,1,1,24,1,1,1,1,17,18,1,1,1,1,1,1,1,13,1,1,1,1,1,1,1,1,1,18,24,12,10,13,1,1}">
        </property>
        <doc>Create periodic timed events.</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-450.0, 90.0]">
        </property>
    </entity>
    <entity name="changeValue" class="ptolemy.actor.lib.DiscreteClock">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="151.0">
        </property>
        <property name="period" class="ptolemy.actor.parameters.PortParameter" value="Infinity">
        </property>
        <property name="offsets" class="ptolemy.data.expr.Parameter" value="{0.0,0.3610044485,1.1894324648,1.2676577669,2.8371340683,6.0779263935,7.0024899353,7.6281032263,7.9461658087,8.6171359568,8.7412262294,20.0429883261,21.37170248,21.6999622133,21.7718204482,23.5418734029,24.7039242576,28.5759984058,30.6306432611,32.0342632298,33.2550163887,34.3462307771,35.3040163888,36.8150351812,38.0604519313,38.1625269756,38.6193993038,39.397623532,43.0942431563,43.988695346,45.344783034,45.4493787718,47.3157351801,47.4693809719,47.5920298459,47.8497583692,48.5440265547,50.5668672039,51.0267631869,52.2998357798,52.5241679929,53.1531304361,53.5126253117,54.1158853125,56.084484432,56.5579449289,57.1786548169,59.228920399,59.2901902217,60.0368174664,60.5165089767,60.9564975136,64.7230804385,64.831899403,67.7166525068,68.2912993164,68.3961899986,69.2433333794,71.5630209641,71.7161035951,76.1349272759,76.3783583655,76.7634580965,78.7163916505,80.4217673449,82.6316480384,82.7606280445,86.2586520438,88.5831210835,88.8810571754,90.1867795972,90.3853154779,92.6031733862,94.0127651109,94.265589199,96.3401029384,98.8138324778,100.0439168994,100.4800870315,100.5796963272,101.2295269052,101.9124084131,102.1514278751,103.3590343731,104.0930486062,104.7271645349,105.1913103162,105.266965933,106.5634605332,106.9739993167,108.5462236092,108.8647131186,110.3723115055,110.4323722268,112.7854811169,115.5054262546,119.4444017903,122.4427237782,124.0655734922,124.3714348006,124.8862706024,125.6356217322,126.6851515548,127.2918462247,127.8757277811,129.651532679,129.6787037552,130.3740155419,131.0728802482,131.6156181243,131.7523312825,133.7081982651,134.060662607,137.0093827247,137.5849477344,138.6952555466,138.8582045575,139.1763181479,140.5777721035,140.9179429193,141.7201011902,142.0926362609,142.3124043578,143.3401690402,143.4664089246,144.1165044921,144.2918213646,145.2294756957,145.324999721,145.7852085504,149.6238788047,150}&#10;">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,true,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false}">
        </property>
        <doc>Create periodic timed events.</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-445.0, 185.0]">
        </property>
    </entity>
    <entity name="stormHandling" class="ptolemy.domains.atc.lib.StormHandling">
        <property name="numberOfTracks" class="ptolemy.data.expr.Parameter" value="30">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-250.0, 100.0]">
        </property>
        <port name="selectedTrack" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="selectedValue" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="trackStatus" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="isStormy">
        </property>
        <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-100.0, 100.0]">
        </property>
    </entity>
    <entity name="CarOutput" class="ptolemy.carsim.CarOutput">
        <property name="carInputId" class="ptolemy.data.expr.Parameter" value="3">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, -160.0]">
        </property>
    </entity>
    <entity name="CarOutput2" class="ptolemy.carsim.CarOutput">
        <property name="carInputId" class="ptolemy.data.expr.Parameter" value="4">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{205.0, -70.0}">
        </property>
    </entity>
    <entity name="CarOutput3" class="ptolemy.carsim.CarOutput">
        <property name="carInputId" class="ptolemy.data.expr.Parameter" value="5">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, 15.0]">
        </property>
    </entity>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="PoissonClock.output" relation="relation5"/>
    <link port="CarInput.input" relation="relation6"/>
    <link port="CarInput.output" relation="relation"/>
    <link port="CSVReader.output" relation="relation6"/>
    <link port="CSVReader.trigger" relation="relation5"/>
    <link port="Intersection.input" relation="relation"/>
    <link port="Intersection.northOutput" relation="relation3"/>
    <link port="Intersection.eastOutput" relation="relation7"/>
    <link port="Intersection.southOutput" relation="relation4"/>
    <link port="trackSelection.output" relation="relation2"/>
    <link port="changeValue.output" relation="relation8"/>
    <link port="stormHandling.selectedTrack" relation="relation2"/>
    <link port="stormHandling.selectedValue" relation="relation8"/>
    <link port="stormHandling.trackStatus" relation="relation9"/>
    <link port="SetVariable.input" relation="relation9"/>
    <link port="CarOutput.input" relation="relation3"/>
    <link port="CarOutput2.input" relation="relation7"/>
    <link port="CarOutput3.input" relation="relation4"/>
</entity>
